<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Savings</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="/css/userIndex.css">
</head>

<body>
	<div class="container">
		<div class="d-flex justify-content-end">
			<a th:href="@{/api/savings/logout}" class="btn btn-outline-secondary">Logout</a>
			<a th:href="@{/savings/mySavingRule}">My Saving Rule</a>
		</div>
		<!--		<form th:action="@{/savings/user}" th:object="${savingsFormWithValidation}" method="post" class="form-inline">-->
		<!--			<div th:errors="*{amount}" class="invalid-feedback d-block"></div>-->
		<!--			<div class="form-group mx-sm-3 mb-2">-->
		<!--				<label for="myRule" class="sr-only"></label>-->
		<!--				<select id="myRule" name="myRule" class="form-control">-->
		<!--					<option value="">-- Select a rule --</option>-->
		<!--					<option th:each="myRule :${myRuleList}" th:value="${myRule.id}" th:text="${myRule.name}"-->
		<!--						th:attr="data-default-savings-amount=${myRule.defaultSavingsAmount}">>-->
		<!--					</option>-->
		<!--				</select>-->
		<!--			</div>-->
		<!--			<div class="form-group mx-sm-3 mb-2">-->
		<!--				<label for="amount" class="sr-only">Amount</label>-->
		<!--				<input type="text" id="amount" th:field="*{amount}" placeholder="Amount" class="form-control">-->
		<!--			</div>-->

		<!--			<div class="form-group mx-sm-3 mb-2">-->
		<!--				<label for="purpose" class="sr-only"></label>-->
		<!--				<select id="purpose" name="purpose" class="form-control">-->
		<!--					<option th:each="purpose :${purposeList}" th:value="${purpose.id}" th:text="${purpose.name}">-->
		<!--					</option>-->
		<!--				</select>-->
		<!--			</div>-->
		<!--			<button type="submit" class="btn btn-primary mb-2">Add Savings</button>-->
		<!--		</form>-->

		<h1>マイ貯金ルール</h1>
		<div class="my-saving-rules">
			<form th:action="@{/savings/user}" th:object="${savingsFormWithValidation}" method="post"
				class="form-inline">
				<!-- 隠しフィールド -->
				<input type="hidden" name="myRuleId" id="myRuleId">
				<input type="hidden" name="myRuleName" id="myRuleName">
				<div class="form-group mx-sm-3 mb-2">
					<label for="purpose" class="sr-only"></label>
					<select id="purpose" name="purpose" class="form-control">
						<option th:each="purpose :${purposeList}" th:value="${purpose.id}" th:text="${purpose.name}">
						</option>
					</select>
				</div>
				<div th:each="myRule : ${myRuleList}" class="card mb-3">
					<div class="card-body">
						<h5 class="card-title" th:text="${myRule.name}"></h5>
						<p class="card-text" th:text="${myRule.defaultSavingsAmount} + '円'">
						</p>
						<div>
							<button type="button" class="btn btn-primary mr-2"
								th:attr="data-id=${myRule.id}, data-name=${myRule.name}"
								onclick="setMyRuleData(this)">達成</button>
							<button class="btn btn-secondary">未達成</button>
						</div>
					</div>
				</div>
			</form>


			<h2>欲しいもののリスト</h2>
			<div class="wanted-list">
				<div th:each="purpose : ${purposeList}" class="card mb-3">
					<div class="card-body">
						<h5 class="card-title" th:text="${purpose.name}"></h5>
						<p class="card-text">
							<span th:text="${purpose.currentAmount}"></span>円 /
							<span th:text="${purpose.neededAmount}"></span>円
						</p>
						<div class="progress">
							<div class="progress-bar" role="progressbar"
								th:style="'width:' + (${purpose.currentAmount} / ${purpose.neededAmount}) * 100 + '%;'"
								aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
						</div>
					</div>
				</div>
			</div>

		</div>
		<script src="/js/index.js"></script>

</body>

</html>
S